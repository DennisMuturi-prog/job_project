import{C as e,_ as t,b as n,d as r,f as i,l as a,o,r as s,s as c,t as l,u,v as d}from"./index-DLL_qxIU.js";import{a as ee,c as te,i as ne,n as f,o as p,r as re,s as m}from"./Draggable-BO8E47Nb.js";import{t as ie}from"./unsorted_laundry_items-Cuz4q7Yp.js";import{t as ae}from"./use-sound.esm-LovjO3TO.js";var h=e(d()),g=e(n()),_=e(t()),v=[{id:`drum`,shape:`circle`,coords:[433,541,159],label:`Google link`},{id:`tray`,shape:`poly`,coords:[319,101,323,239,249,273,83,250,82,100],label:`YouTube link`}],oe=[{id:`detergent`,asset_src:`/job_project/Ariel Original-small.webp`,status:`UNSORTED`,correct_destination:`TRAY`},{id:`clothes`,asset_src:`/job_project/hoodie.webp`,status:`UNSORTED`,correct_destination:`DRUM`},{id:`downy`,asset_src:`/job_project/Sweet elegance1-small.webp`,status:`UNSORTED`,correct_destination:`NONE`}],y=e=>{let t=(0,h.c)(11),{id:n,bounds:r}=e,i;t[0]===n?i=t[1]:(i={id:n},t[0]=n,t[1]=i);let{isOver:a,setNodeRef:o}=p(i),s=a?`2px solid limegreen`:`2px solid transparent`,c;t[2]!==r.height||t[3]!==r.left||t[4]!==r.top||t[5]!==r.width||t[6]!==s?(c={position:`absolute`,left:r.left,top:r.top,width:r.width,height:r.height,border:s,zIndex:5,cursor:`pointer`},t[2]=r.height,t[3]=r.left,t[4]=r.top,t[5]=r.width,t[6]=s,t[7]=c):c=t[7];let l=c,u;return t[8]!==o||t[9]!==l?(u=(0,_.jsx)(`div`,{ref:o,style:l}),t[8]=o,t[9]=l,t[10]=u):u=t[10],u},b=e=>{let t=(0,h.c)(35),{title:n}=e,{next:d}=l.useStepper(),[p]=ae(`/job_project/success_sound.mp3`),[y,b]=(0,g.useState)(oe),T=(0,g.useRef)(null),E;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(E={},t[0]=E):E=t[0];let[D,O]=(0,g.useState)(E),[k,A]=(0,g.useState)(!1),j;t[1]===y?j=t[2]:(j=y.filter(x),t[1]=y,t[2]=j);let M=j,N=M.length===1,P,F;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(P=()=>{let e=T.current;if(!e)return;let t=()=>{let t=e.getBoundingClientRect(),{naturalWidth:n,naturalHeight:r}=e;if(n===0||r===0)return;let i=t.width/n,a=t.height/r,o={};v.forEach(e=>{if(e.shape===`circle`){let[t,n,r]=e.coords;o[e.id]={left:(t-r)*i,top:(n-r)*a,width:2*r*i,height:2*r*a}}else{let t=e.coords.filter(S),n=e.coords.filter(C),r=Math.min(...t),s=Math.max(...t),c=Math.min(...n),l=Math.max(...n);o[e.id]={left:r*i,top:c*a,width:(s-r)*i,height:(l-c)*a}}}),O(o)};return e.complete?t():e.addEventListener(`load`,t),window.addEventListener(`resize`,t),()=>{window.removeEventListener(`resize`,t),e.removeEventListener(`load`,t)}},F=[],t[3]=P,t[4]=F):(P=t[3],F=t[4]),(0,g.useEffect)(P,F);let I;t[5]!==y||t[6]!==p?(I=function(e){let{active:t,over:n}=e;if(!n)return;let r=t.id.split(`-`),i=r[0].toUpperCase(),a=r[1].toUpperCase();if(n.id.toUpperCase()!=a){navigator.vibrate([10,30]),A(!0),setTimeout(()=>A(!1),500),i==`DOWNY`?s.warning(`downy is not used in the wash cycle`):s.warning(`put ${i} clothes in the ${a}`);return}let o=i.toLowerCase();p(),b(()=>y.map(e=>e.id===o?{...e,status:`SORTED`}:e))},t[5]=y,t[6]=p,t[7]=I):I=t[7];let L=I,R=m(ne),z=m(ee),B=m(re),V=te(R,z,B),H;t[8]===n?H=t[9]:(H=(0,_.jsx)(u,{children:(0,_.jsx)(r,{children:n})}),t[8]=n,t[9]=H);let U;t[10]===Symbol.for(`react.memo_cache_sentinel`)?(U={position:`relative`,display:`inline-block`},t[10]=U):U=t[10];let W=k?`shake`:``,G;t[11]===Symbol.for(`react.memo_cache_sentinel`)?(G=(0,_.jsx)(`img`,{ref:T,src:`/job_project/empty_washing_machine-small.webp`,alt:`Map`,height:300,width:300,className:`w-full h-auto max-h-[70vh] object-contain block`}),t[11]=G):G=t[11];let K;t[12]===D?K=t[13]:(K=Object.entries(D).map(w),t[12]=D,t[13]=K);let q;t[14]!==K||t[15]!==W?(q=(0,_.jsxs)(`div`,{style:U,className:W,children:[G,K]}),t[14]=K,t[15]=W,t[16]=q):q=t[16];let J;t[17]===M?J=t[18]:(J=(0,_.jsx)(ie,{items:M}),t[17]=M,t[18]=J);let Y;t[19]!==q||t[20]!==J?(Y=(0,_.jsxs)(`div`,{className:`flex`,children:[q,J]}),t[19]=q,t[20]=J,t[21]=Y):Y=t[21];let X;t[22]!==L||t[23]!==V||t[24]!==Y?(X=(0,_.jsx)(c,{children:(0,_.jsx)(f,{onDragEnd:L,sensors:V,children:Y})}),t[22]=L,t[23]=V,t[24]=Y,t[25]=X):X=t[25];let Z;t[26]!==N||t[27]!==d?(Z=N&&(0,_.jsx)(i,{className:`bounce_button`,onClick:d,children:`wash`}),t[26]=N,t[27]=d,t[28]=Z):Z=t[28];let Q;t[29]===Z?Q=t[30]:(Q=(0,_.jsx)(a,{children:Z}),t[29]=Z,t[30]=Q);let $;return t[31]!==X||t[32]!==Q||t[33]!==H?($=(0,_.jsxs)(o,{children:[H,X,Q]}),t[31]=X,t[32]=Q,t[33]=H,t[34]=$):$=t[34],$};function x(e){return e.status===`UNSORTED`}function S(e,t){return t%2==0}function C(e,t){return t%2==1}function w(e){let[t,n]=e;return(0,_.jsx)(y,{id:t,bounds:n},t)}export{b as default};